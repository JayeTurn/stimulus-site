{% include head.html %}
<body class="{% if page.class %} {{ page.class }}{% endif %}">
  {% include navigation.html %}

  <main id="content" class="handbook">
    <section class="handbook__index">

      <input type="checkbox" id="hamburger" class="handbook__checkbox"/>
      <label class="handbook__mobile-button" for="hamburger"><span></span> Table of Contents</label>

      <div class="handbook__nav">
        {% for section in site.data.handbook.sections %}
          <nav class="handbook__nav-section">
            <p class="handbook__nav-title">{{ section.title }}:</p>
            {% if forloop.index0 == 0 %}
              <label class="handbook__mobile-button handbook__mobile-button--close" for="hamburger"><span></span> close</label>
            {% endif %}
            {% for chapter in site.handbook %}
              {% assign section_name = chapter.section | default: "handbook" %}
              {% if section.name == section_name %}
                {% assign is_active = false %}
                {% if page.url == chapter.url %}
                  {% assign is_active = true %}
                  {% assign next_chapter = site.handbook[forloop.index] %}
                {% endif %}
                <a class="handbook-nav__link{% if is_active %} active{% endif %}" href="{{ chapter.url }}">
                  {{ chapter.prefix | default: forloop.index0 }}:
                  {{ chapter.title }}
                </a>
              {% endif %}
            {% endfor %}
          </nav>
        {% endfor %}
      </div>
    </section>

    <section id="start" class="handbook__content" data-controller="anchor" data-anchor-selector="h2,h3,h4">
      {{ content }}

      {% if next_chapter %}
        <p>Next: <a href="{{ next_chapter.url }}">{{ next_chapter.title }}</a></p>
      {% endif %}
    </section>
  </main>

  {% include footer.html %}
</body>
</html>
