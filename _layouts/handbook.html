{% include head.html %}
<body class="{% if page.class %} {{ page.class }}{% endif %}">
  {% include navigation.html %}

  <main id="content" class="handbook">
    <section class="handbook__index">

      <input type="checkbox" id="hamburger" class="handbook__checkbox"/>
      <label class="handbook__mobile-button" for="hamburger"><span></span> Table of Contents</label>

      <nav class="handbook__nav">
        <label class="handbook__mobile-button handbook__mobile-button--close" for="hamburger"><span></span> close</label>

        <p class="handbook__nav-title">The Handbook:</p>
        {% for chapter in site.handbook %}
          {% assign is_active = false %}
          {% if page.url == chapter.url %}
            {% assign is_active = true %}
            {% assign next_chapter = site.handbook[forloop.index] %}
          {% endif %}
          <a class="handbook__nav-link{% if is_active %} active{% endif %}" href="{{ chapter.url }}">
            {% if forloop.index0 == 0 %}Preface{% else %}{{ forloop.index0 }}{% endif %}: {{ chapter.title }}
          </a>
        {% endfor %}

        <p class="handbook__nav-title">Reference:</p>
        {% for chapter in site.reference %}
          <a class="handbook__nav-link{% if page.url == chapter.url %} active{% endif %}" href="{{ chapter.url }}">
            {{ chapter.title }}
          </a>
        {% endfor %}
      </nav>
    </section>

    <section id="start" class="handbook__content" data-controller="anchor" data-anchor-selector="h2,h3,h4">
      {{ content }}

      {% if next_chapter %}
        <p>Next: <a href="{{ next_chapter.url }}">{{ next_chapter.title }}</a></p>
      {% endif %}
    </section>
  </main>

  {% include footer.html %}
</body>
</html>
